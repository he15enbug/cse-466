# Sandboxing
- *babyjail-level1*: the program takes the file path as parameter, and display its content. The program will use `chroot` to sandbox the process. Use `../../../../../../flag` as parameter (use enough `../` to ensure that we reach the root path)
- *babyjail-level2*: the program takes our shellcode as input, and run it. We only need to construct the shellcode that opens and prints out `../../../../flag` to stdout, and input it to the challenge program
- *babyjail-level3*: the challenge moves the current directory into the jail, so we cannot use `../../../../` to get to the root path of the system. `chroot('/')` to escape. But a vulnerability is that before it changes the root and current directory, it will open a file or directory specified by us in the argument. We can open `/` (the root path of the system), then, we can use `openat(root_fd, 'flag', O_RDONLY)` to open `/flag` (the real flag) even inside this `chroot` jail
- *babyjail-level4*: same setting as in level 3, but allows only the following syscalls: ["openat", "read", "write", "sendfile"]. Luckily, we only used `openat` and `sendfile` in level 3, so we can directly use the code in level 3 to solve level 4
- *babyjail-level5*: use `dir_fd = open('/', 0, 0)` (inside the `chroot` sandbox), `linkat(3, 'flag', dir_fd, 'xxx')`, `flag_fd =  open('/xxx', 0, 0)`, then `sendfile(1, flag_fd, 0, 1000)`
- *babyjail-level6*: use `fchdir(dir_fd)` to switch to the real root (that we previously opened)
- *babyjail-level7*: we can only use these system calls: ["chdir", "chroot", "mkdir", "open", "read", "write", "sendfile"]. None of `chroot`, `chdir`, and `mkdir` takes file descriptor as input, how can we take the advantage of the previously opened directory (`/`, or something else that we can specify)? We cannot. But one thing important is that when current working directory is not inside the chroot jail, we can use `../../../../` to get the root path of the OS, we can `mkdir` a new directory inside the jail, and `chroot` to the new directory, this will not change the current working directory, i.e., our current working directory is now outside the jail!
- *babyjail-level8*